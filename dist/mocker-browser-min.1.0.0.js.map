{"version":3,"sources":["webpack:///mocker-browser-min.1.0.0.js","webpack:///webpack/bootstrap 2861e6df5abe89e1b4ed?f0fb","webpack:///./src/mocker/Data/index.js?e22d","webpack:///./src/mocker/constant.js?9841","webpack:///./src/mocker/config.js?aa3c","webpack:///./src/mocker/MockerHttpRequest/index.js?c7d8","webpack:///./package.json?ed88","webpack:///./src/mocker/Data/Database.js?b0ed","webpack:///./src/mocker/MockerHttpRequest/MockerHttpRequest.js?5436","webpack:///./src/mocker/util/Util.js?a255","webpack:///./src/mocker/util/index.js?ab53","webpack:///./src/mocker/Gui/Browser.js?da44","webpack:///./src/mocker/Gui/Browser.html?c668","webpack:///./src/mocker/index.js?a371"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Database","keys","forEach","key","MOCKERHTTPREQUEST_DELAY","XHR_EVENTS","READYSTATECHANGE","LOADSTART","PROGRESS","ABORT","ERROR","LOAD","TIMEOUT","LOADEND","HTTP_STATUS_CODES","100","101","200","201","202","203","204","205","206","300","301","302","303","304","305","307","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","422","500","501","502","503","504","505","MOCKER_DATABASE_NAME","_constant","default","timeout","_MockerHttpRequest","MockerHttpRequest","version","description","main","scripts","dev","build","clean","repository","type","url","keywords","author","license","bugs","homepage","devDependencies","babel-core","babel-loader","babel-preset-es2015","css-loader","file-loader","html-loader","html-webpack-plugin","url-loader","webpack","webpack-dev-server","createMockerDatabase","request","window","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","IDBTransaction","webkitIDBTransaction","msIDBTransaction","READ_WRITE","IDBKeyRange","webkitIDBKeyRange","msIDBKeyRange","open","onerror","Error","onsuccess","event","db","target","result","onupgradeneeded","objectStore","createObjectStore","keyPath","autoIncrement","createIndex","unique","getMockerRecord","checkMockerRecord","transaction","Promise","resolve","reject","index","method","e","getAllMockerRecord","items","openCursor","cursor","push","continue","addMockerRecord","add","response","deleteMockerRecord","updateMockerRecord","_typeof","test","undefined","Symbol","iterator","obj","constructor","_interopRequireDefault","replaceXMLHttpRequest","XMLHttpRequest","mocker","status","resetXMLHttpRequest","_XMLHttpRequest","ActiveXObject","_ActiveXObject","defineProperties","this","_xmlHttpRequest","writable","_listeners","_requestHeader","config","_config2","record","onload","onloadend","onloadstart","onprogress","onreadystatechange","ontimeout","readyState","responseText","responseType","responseURL","responseXML","statusText","MockXMLHttpRequestEventTarget","MockEventTarget","find","_Data","_util","_config","MockerHttpRequestPrototype","DONE","HEADERS_RECEIVED","LOADING","OPENED","UNSENT","abort","dispatchEvent","Event","getAllResponseHeaders","getResponseHeader","onabort","async","username","password","that","then","item","overrideMimeType","send","data","done","setRequestHeader","setTimeout","bind","upload","MockXMLHttpRequestEventTargetPrototype","MockEventTargetPrototype","addEventListener","callback","stack","getVariableType","length","removeEventListener","splice","createPrototypeChain","arguments","console","error","create","apply","Array","slice","toString","_Util","_Browser","_Browser2","MockerBrowser","init","rootElement","document","createElement","className","innerHTML","body","appendChild","setInitialStyle","querySelector","onclick","switchStatus","switchAdd","switchList","handleSave","classList","remove","close","style","display","map","ele","array","preventDefault","formElement","mock","_interopRequireWildcard","newObj","_package","npmPackage","log"],"mappings":"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","file":"mocker-browser-min.1.0.0.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Database = __webpack_require__(5);\n\nObject.keys(_Database).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _Database[key];\n    }\n  });\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Created by mac on 17/1/20.\n */\n// MockerHttpRequest\n\n// 默认mock延迟时间\nvar MOCKERHTTPREQUEST_DELAY = exports.MOCKERHTTPREQUEST_DELAY = 0;\n// 默认是否匹配到mock记录\n\nvar XHR_EVENTS = exports.XHR_EVENTS = {\n    READYSTATECHANGE: \"readystatechange\",\n    LOADSTART: \"loadstart\",\n    PROGRESS: \"progress\",\n    ABORT: \"abort\",\n    ERROR: \"error\",\n    LOAD: \"load\",\n    TIMEOUT: \"timeout\",\n    LOADEND: \"loadend\"\n};\n\nvar HTTP_STATUS_CODES = exports.HTTP_STATUS_CODES = {\n    100: \"Continue\",\n    101: \"Switching Protocols\",\n    200: \"OK\",\n    201: \"Created\",\n    202: \"Accepted\",\n    203: \"Non-Authoritative Information\",\n    204: \"No Content\",\n    205: \"Reset Content\",\n    206: \"Partial Content\",\n    300: \"Multiple Choice\",\n    301: \"Moved Permanently\",\n    302: \"Found\",\n    303: \"See Other\",\n    304: \"Not Modified\",\n    305: \"Use Proxy\",\n    307: \"Temporary Redirect\",\n    400: \"Bad Request\",\n    401: \"Unauthorized\",\n    402: \"Payment Required\",\n    403: \"Forbidden\",\n    404: \"Not Found\",\n    405: \"Method Not Allowed\",\n    406: \"Not Acceptable\",\n    407: \"Proxy Authentication Required\",\n    408: \"Request Timeout\",\n    409: \"Conflict\",\n    410: \"Gone\",\n    411: \"Length Required\",\n    412: \"Precondition Failed\",\n    413: \"Request Entity Too Large\",\n    414: \"Request-URI Too Long\",\n    415: \"Unsupported Media Type\",\n    416: \"Requested Range Not Satisfiable\",\n    417: \"Expectation Failed\",\n    422: \"Unprocessable Entity\",\n    500: \"Internal Server Error\",\n    501: \"Not Implemented\",\n    502: \"Bad Gateway\",\n    503: \"Service Unavailable\",\n    504: \"Gateway Timeout\",\n    505: \"HTTP Version Not Supported\"\n};\n\nvar MOCKER_DATABASE_NAME = exports.MOCKER_DATABASE_NAME = \"MockerDatabase\";\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _constant = __webpack_require__(1);\n\nexports.default = {\n    timeout: _constant.MOCKERHTTPREQUEST_DELAY\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MockerHttpRequest = __webpack_require__(6);\n\nObject.keys(_MockerHttpRequest).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _MockerHttpRequest[key];\n    }\n  });\n});\nexports.default = _MockerHttpRequest.MockerHttpRequest; /**\n                                                         * Created by mac on 17/1/20.\n                                                         */\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"name\": \"Mocker\",\n\t\"version\": \"1.0.0\",\n\t\"description\": \"A mock data management tool\",\n\t\"main\": \"index.js\",\n\t\"scripts\": {\n\t\t\"dev\": \" NODE_ENV=development webpack-dev-server --hot  --config config/webpack.config.js\",\n\t\t\"build\": \"npm run clean && NODE_ENV=production webpack --config config/webpack.config.js\",\n\t\t\"clean\": \"rm -rf dist\"\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://github.com/PaulShi666/Mocker.git\"\n\t},\n\t\"keywords\": [\n\t\t\"mock\",\n\t\t\"Http\"\n\t],\n\t\"author\": \"Paul\",\n\t\"license\": \"ISC\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/PaulShi666/Mocker/issues\"\n\t},\n\t\"homepage\": \"https://github.com/PaulShi666/Mocker#readme\",\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"^6.22.1\",\n\t\t\"babel-loader\": \"^6.2.10\",\n\t\t\"babel-preset-es2015\": \"^6.22.0\",\n\t\t\"css-loader\": \"^0.26.1\",\n\t\t\"file-loader\": \"^0.10.0\",\n\t\t\"html-loader\": \"^0.4.4\",\n\t\t\"html-webpack-plugin\": \"^2.26.0\",\n\t\t\"url-loader\": \"^0.5.7\",\n\t\t\"webpack\": \"^2.2.1\",\n\t\t\"webpack-dev-server\": \"^1.16.2\"\n\t}\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.updateMockerRecord = exports.deleteMockerRecord = exports.addMockerRecord = exports.getAllMockerRecord = exports.getMockerRecord = exports.createMockerDatabase = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _constant = __webpack_require__(1);\n\nvar db = void 0;\n\nfunction createMockerDatabase() {\n\n    //兼容性\n    var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n    var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction || { READ_WRITE: \"readwrite\" };\n    var IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\n\n    var request = window.indexedDB.open(_constant.MOCKER_DATABASE_NAME);\n    request.onerror = function () {\n        throw new Error(\"数据库创建失败\");\n    };\n\n    request.onsuccess = function (event) {\n        db = event.target.result;\n    };\n\n    request.onupgradeneeded = function (event) {\n        db = event.target.result;\n\n        // 创建表结构\n        var objectStore = db.createObjectStore(\"records\", {\n            keyPath: \"id\",\n            autoIncrement: true\n        });\n\n        objectStore.createIndex(\"methodUrl\", [\"method\", \"url\"], {\n            unique: true\n        });\n    };\n}\nfunction getMockerRecord(o) {\n    checkMockerRecord(o);\n\n    var objectStore = db.transaction(\"records\", \"readonly\").objectStore(\"records\");\n\n    return new Promise(function (resolve, reject) {\n        // 根据索引查询\n        objectStore.index('methodUrl').get([o.method, o.url]).onsuccess = function (e) {\n            resolve(e.target.result);\n        };\n    });\n}\nfunction getAllMockerRecord(o) {\n    var items = [];\n\n    var objectStore = db.transaction(\"records\", \"readonly\").objectStore(\"records\");\n\n    return new Promise(function (resolve, reject) {\n        // 使用游标查询所有的数据\n        objectStore.openCursor().onsuccess = function (event) {\n            var cursor = event.target.result;\n            if (cursor) {\n                items.push(cursor.value);\n                cursor.continue();\n            } else {\n                resolve(items);\n            }\n        };\n    });\n}\nfunction addMockerRecord(o) {\n\n    checkMockerRecord(o);\n\n    var objectStore = db.transaction(\"records\", \"readwrite\").objectStore(\"records\");\n    var request = objectStore.add({\n        \"method\": o.method,\n        \"url\": o.url,\n        \"response\": o.response\n    });\n    request.onsuccess = function () {};\n    request.onerror = function () {\n        throw new Error(\"Mocker数据库添加失败\");\n    };\n}\n\nfunction deleteMockerRecord(o) {}\n\nfunction updateMockerRecord(o) {}\n\nfunction checkMockerRecord(o) {\n    // 检测输入参数\n    if (!((typeof o === \"undefined\" ? \"undefined\" : _typeof(o)) === 'object' && typeof o.method === 'string' && typeof o.url === 'string' && /^(get|post)$/i.test(o.method))) {\n        throw new Error('数据库mock参数非法');\n    }\n}\n\nexports.createMockerDatabase = createMockerDatabase;\nexports.getMockerRecord = getMockerRecord;\nexports.getAllMockerRecord = getAllMockerRecord;\nexports.addMockerRecord = addMockerRecord;\nexports.deleteMockerRecord = deleteMockerRecord;\nexports.updateMockerRecord = updateMockerRecord;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.resetXMLHttpRequest = exports.replaceXMLHttpRequest = exports.MockerHttpRequest = undefined;\n\nvar _util = __webpack_require__(8);\n\nvar _constant = __webpack_require__(1);\n\nvar _config = __webpack_require__(2);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _Data = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//保存原生XMLHttpRequest\n/**\n * Created by mac on 17/1/20.\n */\n\nvar _XMLHttpRequest = window.XMLHttpRequest;\n//保存原生ActiveXObject\nvar _ActiveXObject = window.ActiveXObject;\n\n// 修改原生的XMLHttpRequest\nfunction replaceXMLHttpRequest() {\n    if (window.XMLHttpRequest) {\n        window.XMLHttpRequest = MockerHttpRequest;\n    }\n    if (window.mocker) {\n        window.mocker.status = 1;\n    }\n}\n// 恢复原生的XMLHttpRequest\nfunction resetXMLHttpRequest() {\n    window.XMLHttpRequest = _XMLHttpRequest;\n    window.ActiveXObject = _ActiveXObject;\n    if (window.mocker) {\n        window.mocker.status = 0;\n    }\n}\n\n//自定义XHR对象构造器\nfunction MockerHttpRequest() {\n\n    Object.defineProperties(this, {\n        _xmlHttpRequest: {\n            writable: false,\n            enumerable: false,\n            configurable: false\n        },\n        _listeners: {\n            value: {}\n        },\n        _requestHeader: {\n            value: {}\n\n        },\n        config: {\n            value: {\n                timeout: _config2.default.timeout,\n                // 数据库mock记录（延迟对象）\n                record: null\n            }\n        },\n        onerror: {\n            value: null\n        },\n        onload: {\n            value: null\n        },\n        onloadend: {\n            value: null\n        },\n        onloadstart: {\n            value: null\n        },\n        onprogress: {\n            value: null\n\n        },\n        onreadystatechange: {\n            value: null\n        },\n        ontimeout: {\n            value: null\n        },\n        readyState: {\n            value: 0,\n            writable: true\n        },\n        response: {\n            value: '',\n            writable: true\n        },\n        responseText: {\n            value: '',\n            writable: true\n        },\n        responseType: {\n            value: ''\n        },\n        responseURL: {\n            value: ''\n        },\n        responseXML: {\n            value: null\n        },\n        status: {\n            value: 0,\n            writable: true\n        },\n        statusText: {\n            value: \"\",\n            writable: true\n\n        },\n        timeout: {\n            value: 0\n\n        }\n    });\n}\n\nvar MockerHttpRequestPrototype = {\n    constructor: {\n        value: MockerHttpRequest,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    DONE: { value: 4 },\n    HEADERS_RECEIVED: { value: 2 },\n    LOADING: { value: 3 },\n    OPENED: { value: 1 },\n    UNSENT: { value: 0 },\n    abort: {\n        value: function value() {\n            this.readyState = MockerHttpRequestPrototype.UNSENT.value;\n            this.dispatchEvent(new Event(_constant.XHR_EVENTS.ABORT));\n            this.dispatchEvent(new Event(_constant.XHR_EVENTS.ERROR));\n        }\n    },\n    getAllResponseHeaders: {\n        value: function value() {}\n    },\n    getResponseHeader: {\n        value: function value() {}\n    },\n    onabort: {},\n    onerror: {},\n    onload: {},\n    onloadend: {},\n    onloadstart: {},\n    onprogress: {},\n    onreadystatechange: {},\n    ontimeout: {},\n    open: {\n        //推荐不要用箭头函数,词法作用域错误\n        value: function value(method, url, async, username, password) {\n\n            // 序列化请求\n            this.config.open = {\n                method: method,\n                url: url,\n                async: typeof async === 'boolean' ? async : true,\n                username: username,\n                password: password\n            };\n\n            var that = this;\n\n            //在Mock Indexdb记录中查询\n            this.config.record = find({ method: method, url: url }).then(function (item) {\n\n                if (!item) {\n                    //在Mock记录中没有查询到\n\n\n                } else {\n                    //在Mock记录中查询到\n\n                    that.readyState = MockerHttpRequestPrototype.OPENED.value;\n                    that.dispatchEvent(new Event(_constant.XHR_EVENTS.READYSTATECHANGE));\n                }\n                return item;\n            });\n        }\n    },\n    overrideMimeType: {\n        value: function value() {}\n    },\n    readyState: {},\n    response: {},\n    responseText: {},\n    responseType: {},\n    responseURL: {},\n    responseXML: {},\n    send: {\n        value: function value(data) {\n\n            // 序列化请求\n\n            var that = this;\n\n            this.config.record.then(function (item) {\n                //已经在open 时使用Mock Indexdb记录中查询\n\n                if (!item) {\n                    //在Mock记录中没有查询到\n                } else {\n                    //在Mock记录中查询到\n                    that.response = that.responseText = item.response;\n\n                    that.setRequestHeader('X-Requested-With', 'MockXMLHttpRequest');\n                    that.dispatchEvent(new Event(_constant.XHR_EVENTS.LOADSTART));\n\n                    //使用settimeout模拟异步\n                    if (that.config.open.async === true) {\n                        window.setTimeout(done.bind(that), that.config.timeout);\n                    } else {\n                        done.call(that);\n                    }\n                }\n            });\n\n            function done() {\n                this.readyState = MockerHttpRequestPrototype.HEADERS_RECEIVED.value;\n                this.dispatchEvent(new Event(_constant.XHR_EVENTS.READYSTATECHANGE));\n\n                this.readyState = MockerHttpRequestPrototype.LOADING.value;\n                this.dispatchEvent(new Event(_constant.XHR_EVENTS.READYSTATECHANGE));\n\n                this.status = 200;\n\n                this.statusText = _constant.HTTP_STATUS_CODES[200];\n\n                this.readyState = MockerHttpRequestPrototype.DONE.value;\n\n                this.dispatchEvent(new Event(_constant.XHR_EVENTS.READYSTATECHANGE));\n                this.dispatchEvent(new Event(_constant.XHR_EVENTS.LOAD));\n                this.dispatchEvent(new Event(_constant.XHR_EVENTS.LOADEND));\n            }\n        }\n    },\n    setRequestHeader: {\n        value: function value(key, _value) {\n            if (key in this._requestHeader) {\n                this._requestHeader[key] = ',' + _value;\n            } else {\n                this._requestHeader[key] = _value;\n            }\n        }\n    },\n    status: {},\n    statusText: {},\n    timeout: {},\n    upload: {}\n};\n\nfunction MockXMLHttpRequestEventTarget() {}\n\nvar MockXMLHttpRequestEventTargetPrototype = {\n    constructor: {\n        value: MockXMLHttpRequestEventTarget,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    onabort: {},\n    onerror: {},\n    onload: {},\n    onloadend: {},\n    onloadstart: {},\n    onprogress: {},\n    ontimeout: {}\n};\nfunction MockEventTarget() {}\nvar MockEventTargetPrototype = {\n    constructor: {\n        value: MockEventTarget,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    addEventListener: {\n        value: function value(type, callback) {\n            // type = 'on' + type;\n\n            if (!(type in this._listeners)) {\n                this._listeners[type] = [];\n            }\n\n            this._listeners[type].push(callback);\n\n            // 把回调函数返回，方便移除\n            return callback;\n        }\n    },\n    dispatchEvent: {\n        value: function value(event) {\n            if (!(event.type in this._listeners)) {\n                return;\n            }\n\n            var stack = this._listeners[event.type];\n\n            if ((0, _util.getVariableType)(stack) !== 'Array') {\n                return;\n            }\n            // 事件目标改写\n            // event.target = this;\n\n            for (var i = 0; i < stack.length; i++) {\n                stack[i].call(this, event);\n            }\n        }\n    },\n    removeEventListener: {\n        value: function value(type, callback) {\n            if (!(type in this._listeners)) {\n                return;\n            }\n\n            var stack = this._listeners[type];\n\n            if ((0, _util.getVariableType)(stack) !== 'Array') {\n                return;\n            }\n\n            for (var i = 0; i < stack.length; i++) {\n                if (stack[i] === callback) {\n                    stack[i].splice(i, 1);\n                    i--;\n                }\n            }\n        }\n    }\n};\nfunction find(o) {\n    return (0, _Data.getMockerRecord)(o);\n}\n\n//MockerHttpRequest原型链模拟\nMockerHttpRequest.prototype = (0, _util.createPrototypeChain)(MockerHttpRequestPrototype, MockXMLHttpRequestEventTargetPrototype, MockEventTargetPrototype);\n\nexports.MockerHttpRequest = MockerHttpRequest;\nexports.replaceXMLHttpRequest = replaceXMLHttpRequest;\nexports.resetXMLHttpRequest = resetXMLHttpRequest;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * Created by mac on 17/1/20.\n */\n\n//使用Object.create建立原型链继承关系\nfunction createPrototypeChain() {\n    // console.log(arguments);\n    if (_typeof(arguments[0]) !== 'object') {\n        console.error('原型链属性为对象类型');\n        return;\n    }\n\n    if (arguments.length === 1) {\n        return Object.create(Object.prototype, arguments[0]);\n    } else {\n        return Object.create(createPrototypeChain.apply(null, Array.prototype.slice.call(arguments, 1)), arguments[0]);\n    }\n}\n\n// 获取精确类型\nfunction getVariableType(o) {\n    return Object.prototype.toString.call(o).slice(8, -1);\n}\n\nexports.createPrototypeChain = createPrototypeChain;\nexports.getVariableType = getVariableType;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Util = __webpack_require__(7);\n\nObject.keys(_Util).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _Util[key];\n    }\n  });\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _Browser = __webpack_require__(10);\n\nvar _Browser2 = _interopRequireDefault(_Browser);\n\nvar _Data = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 单例模式，因为视图仅出现一次\n\n/**\n * Created by mac on 17/2/4.\n */\n\nvar MockerBrowser = {\n    init: function init() {\n\n        var rootElement = document.createElement('div');\n        rootElement.className = 'mocker';\n        rootElement.innerHTML = _Browser2.default;\n\n        document.body.appendChild(rootElement);\n\n        // 初始化样式\n        this.setInitialStyle(rootElement);\n\n        // 激活工具面板\n        rootElement.querySelector('.mocker-switch-btn').onclick = this.switchStatus.bind(this, rootElement);\n\n        // 增加数据面板\n        rootElement.querySelector(\".mocker-table .add\").onclick = this.switchAdd.bind(this, rootElement);\n        // 查看数据列表\n        rootElement.querySelector(\".mocker-table .list\").onclick = this.switchList.bind(this, rootElement);\n        // 保存新的数据\n        rootElement.querySelector(\".mocker-table .save\").onclick = this.handleSave.bind(this, rootElement);\n    },\n    setInitialStyle: function setInitialStyle(rootElement) {\n        if (window.mocker.status === 0) {\n            rootElement.querySelector('.mocker-icon').classList.remove('opened');\n        } else if (window.mocker.status === 1) {\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n        }\n    },\n    switchStatus: function switchStatus(rootElement, event) {\n\n        if (window.mocker.status === 0) {\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n            window.mocker && window.mocker.open();\n        } else if (window.mocker.status === 1) {\n            rootElement.querySelector('.mocker-icon').classList.remove('opened');\n            window.mocker && window.mocker.close();\n        }\n    },\n    switchAdd: function switchAdd(rootElement, event) {\n        if (rootElement.querySelector(\".form-add\").style.display === 'block') {\n            rootElement.querySelector(\".form-add\").style.display = 'none';\n        } else {\n            rootElement.querySelector(\".form-add\").style.display = 'block';\n            rootElement.querySelector(\".list-panel\").style.display = 'none';\n        }\n    },\n    switchList: function switchList(rootElement) {\n        (0, _Data.getAllMockerRecord)().then(function (items) {\n            if (rootElement.querySelector(\".list-panel\").style.display === 'block') {\n                rootElement.querySelector(\".list-panel\").style.display = 'none';\n            } else {\n                rootElement.querySelector(\".form-add\").style.display = 'none';\n                rootElement.querySelector(\".list-panel\").style.display = 'block';\n\n                rootElement.querySelector('.mocker-list').innerHTML = items.map(function (ele, index, array) {\n                    return '<tr>\\n                                <td>' + ele.url + '</td>\\n                                <td>' + ele.method + '</td>\\n                                <td>' + ele.response + '</td>\\n                            </tr>';\n                });\n            }\n        });\n    },\n    handleSave: function handleSave(rootElement, event) {\n        event.preventDefault();\n\n        var formElement = rootElement.querySelector('.form-add');\n\n        mocker.mock({\n            url: formElement.querySelector(\"input[name=url]\").value,\n            method: formElement.querySelector(\"input[name=method]\").value,\n            response: formElement.querySelector(\"input[name=response]\").value\n        });\n\n        // 保存后开启mocker\n        if (window.mocker.status === 0) {\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n            window.mocker && window.mocker.open();\n        }\n    }\n\n};\nexports.default = MockerBrowser;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<style>\\n    .mocker {\\n\\n    }\\n\\n    .mocker .mocker-container {\\n        border-radius: 10px;\\n        position: fixed;\\n        background: #F0F0F0;\\n        right: 10px;\\n        top: 10px;\\n        text-align: center;\\n        padding: 5px;\\n    }\\n\\n    .mocker .mocker-icon {\\n        fill: #334ff9;\\n    }\\n\\n    .mocker .mocker-icon.opened {\\n        fill: #fd0000;\\n    }\\n\\n    .mocker .mocker-switch-btn {\\n        border: none;\\n        background: transparent;\\n\\n        padding: 5px 10px;\\n        margin: 0;\\n        outline: none;\\n    }\\n\\n    .mocker .mocker-table {\\n\\n    }\\n\\n</style>\\n<script>\\n\\n</script>\\n<div class=\\\"mocker-container\\\">\\n    <button class=\\\"mocker-switch-btn\\\">\\n        <svg class=\\\"mocker-icon\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n             xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 32 32\\\">\\n            <path d=\\\"M22 2l-10 10h-6l-6 8c0 0 6.357-1.77 10.065-0.94l-10.065 12.94 13.184-10.255c1.839 4.208-1.184 10.255-1.184 10.255l8-6v-6l10-10 2-10-10 2z\\\"></path>\\n        </svg>\\n    </button>\\n    <div class=\\\"mocker-table\\\">\\n\\n        <button class=\\\"add\\\">增加</button>\\n        <button class=\\\"list\\\">数据</button>\\n\\n        <form style=\\\"display: none\\\" action=\\\"\\\" class=\\\"form-add\\\">\\n            <p>\\n                <label>\\n                    <input placeholder=\\\"请求路径\\\" type=\\\"text\\\" name=\\\"url\\\"/>\\n                </label>\\n            </p>\\n            <p>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"method\\\" value=\\\"get\\\">get\\n                </label>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"method\\\" value=\\\"post\\\">post\\n                </label>\\n            </p>\\n\\n            <p>\\n                <input placeholder=\\\"响应数据\\\" name=\\\"response\\\" type=\\\"text\\\">\\n            </p>\\n\\n            <button class=\\\"save\\\">保存</button>\\n        </form>\\n\\n        <table style=\\\"display: none\\\" class=\\\"list-panel\\\">\\n            <thead>\\n            <tr>\\n                <td>请求路径</td>\\n                <td>请求方式</td>\\n                <td>响应数据</td>\\n            </tr>\\n            </thead>\\n            <tbody class=\\\"mocker-list\\\">\\n\\n            </tbody>\\n        </table>\\n    </div>\\n</div>\\n\";\n\n/***/ }),\n/* 11 */,\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _package = __webpack_require__(4);\n\nvar npmPackage = _interopRequireWildcard(_package);\n\nvar _config = __webpack_require__(2);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _Data = __webpack_require__(0);\n\nvar _MockerHttpRequest = __webpack_require__(3);\n\nvar _Browser = __webpack_require__(9);\n\nvar _Browser2 = _interopRequireDefault(_Browser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// 初始化Mocker\nvar mocker = {\n    open: _MockerHttpRequest.replaceXMLHttpRequest,\n    close: _MockerHttpRequest.resetXMLHttpRequest,\n    status: 0,\n    config: _config2.default,\n    version: npmPackage.version,\n    mock: function mock() {\n        _Data.addMockerRecord.apply(this, arguments);\n    }\n};\n\n// 给window对象增加mocker接口\n/**\n * Created by mac on 17/1/17.\n */\n\nif (!window.mocker || window.mocker.version !== mocker.version) {\n    window.mocker = mocker;\n}\n\n//初始化Mocker对应数据库\ntry {\n    (0, _Data.createMockerDatabase)();\n} catch (e) {\n    console.log('初始化Mocker数据库失败', e);\n}\n\n// 初始化MockerBrowser\ntry {\n    _Browser2.default.init();\n} catch (e) {\n    console.log('初始化MockerGui失败', e);\n}\n\nexports.default = mocker;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// mocker-browser-min.1.0.0.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2861e6df5abe89e1b4ed","/**\n * Created by mac on 17/1/24.\n */\n\nexport * from './Database';\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/Data/index.js","/**\n * Created by mac on 17/1/20.\n */\n// MockerHttpRequest\n\n// 默认mock延迟时间\nexport const MOCKERHTTPREQUEST_DELAY = 0;\n// 默认是否匹配到mock记录\n\nexport const XHR_EVENTS = {\n    READYSTATECHANGE: \"readystatechange\",\n    LOADSTART: \"loadstart\",\n    PROGRESS: \"progress\",\n    ABORT: \"abort\",\n    ERROR: \"error\",\n    LOAD: \"load\",\n    TIMEOUT: \"timeout\",\n    LOADEND: \"loadend\"\n};\n\nexport const HTTP_STATUS_CODES = {\n    100: \"Continue\",\n    101: \"Switching Protocols\",\n    200: \"OK\",\n    201: \"Created\",\n    202: \"Accepted\",\n    203: \"Non-Authoritative Information\",\n    204: \"No Content\",\n    205: \"Reset Content\",\n    206: \"Partial Content\",\n    300: \"Multiple Choice\",\n    301: \"Moved Permanently\",\n    302: \"Found\",\n    303: \"See Other\",\n    304: \"Not Modified\",\n    305: \"Use Proxy\",\n    307: \"Temporary Redirect\",\n    400: \"Bad Request\",\n    401: \"Unauthorized\",\n    402: \"Payment Required\",\n    403: \"Forbidden\",\n    404: \"Not Found\",\n    405: \"Method Not Allowed\",\n    406: \"Not Acceptable\",\n    407: \"Proxy Authentication Required\",\n    408: \"Request Timeout\",\n    409: \"Conflict\",\n    410: \"Gone\",\n    411: \"Length Required\",\n    412: \"Precondition Failed\",\n    413: \"Request Entity Too Large\",\n    414: \"Request-URI Too Long\",\n    415: \"Unsupported Media Type\",\n    416: \"Requested Range Not Satisfiable\",\n    417: \"Expectation Failed\",\n    422: \"Unprocessable Entity\",\n    500: \"Internal Server Error\",\n    501: \"Not Implemented\",\n    502: \"Bad Gateway\",\n    503: \"Service Unavailable\",\n    504: \"Gateway Timeout\",\n    505: \"HTTP Version Not Supported\"\n};\n\nexport const MOCKER_DATABASE_NAME = \"MockerDatabase\";\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/constant.js","import {\n    MOCKERHTTPREQUEST_DELAY,\n} from './constant';\n\nexport default {\n        timeout:MOCKERHTTPREQUEST_DELAY,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/config.js","/**\n * Created by mac on 17/1/20.\n */\nimport {MockerHttpRequest} from './MockerHttpRequest';\n\nexport default MockerHttpRequest;\nexport * from './MockerHttpRequest';\n\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/MockerHttpRequest/index.js","module.exports = {\n\t\"name\": \"Mocker\",\n\t\"version\": \"1.0.0\",\n\t\"description\": \"A mock data management tool\",\n\t\"main\": \"index.js\",\n\t\"scripts\": {\n\t\t\"dev\": \" NODE_ENV=development webpack-dev-server --hot  --config config/webpack.config.js\",\n\t\t\"build\": \"npm run clean && NODE_ENV=production webpack --config config/webpack.config.js\",\n\t\t\"clean\": \"rm -rf dist\"\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://github.com/PaulShi666/Mocker.git\"\n\t},\n\t\"keywords\": [\n\t\t\"mock\",\n\t\t\"Http\"\n\t],\n\t\"author\": \"Paul\",\n\t\"license\": \"ISC\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/PaulShi666/Mocker/issues\"\n\t},\n\t\"homepage\": \"https://github.com/PaulShi666/Mocker#readme\",\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"^6.22.1\",\n\t\t\"babel-loader\": \"^6.2.10\",\n\t\t\"babel-preset-es2015\": \"^6.22.0\",\n\t\t\"css-loader\": \"^0.26.1\",\n\t\t\"file-loader\": \"^0.10.0\",\n\t\t\"html-loader\": \"^0.4.4\",\n\t\t\"html-webpack-plugin\": \"^2.26.0\",\n\t\t\"url-loader\": \"^0.5.7\",\n\t\t\"webpack\": \"^2.2.1\",\n\t\t\"webpack-dev-server\": \"^1.16.2\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 4\n// module chunks = 0 1 2 3","import {MOCKER_DATABASE_NAME} from '../constant';\n\nlet db;\n\nfunction createMockerDatabase() {\n\n    //兼容性\n    let indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;\n    let IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction || {READ_WRITE: \"readwrite\"};\n    let IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;\n\n    let request = window.indexedDB.open(MOCKER_DATABASE_NAME);\n    request.onerror = function () {\n        throw new Error(\"数据库创建失败\")\n    };\n\n    request.onsuccess = function (event) {\n        db = event.target.result;\n    };\n\n    request.onupgradeneeded = function (event) {\n        db = event.target.result;\n\n        // 创建表结构\n        let objectStore = db.createObjectStore(\"records\", {\n            keyPath: \"id\",\n            autoIncrement: true\n        });\n\n        objectStore.createIndex(\"methodUrl\", [\"method\", \"url\"], {\n            unique: true\n        });\n\n    }\n\n\n}\nfunction getMockerRecord(o) {\n    checkMockerRecord(o);\n\n    let objectStore = db.transaction(\"records\", \"readonly\").objectStore(\"records\");\n\n    return new Promise(function (resolve, reject) {\n        // 根据索引查询\n        objectStore.index('methodUrl').get([o.method, o.url]).onsuccess = function (e) {\n            resolve(e.target.result);\n        }\n    });\n\n\n}\nfunction getAllMockerRecord(o) {\n    let items = [];\n\n    let objectStore = db.transaction(\"records\", \"readonly\").objectStore(\"records\");\n\n    return new Promise(function (resolve, reject) {\n        // 使用游标查询所有的数据\n        objectStore.openCursor().onsuccess = function (event) {\n            let cursor = event.target.result;\n            if (cursor) {\n                items.push(cursor.value);\n                cursor.continue();\n            }else{\n                resolve(items);\n            }\n\n        };\n    });\n}\nfunction addMockerRecord(o) {\n\n    checkMockerRecord(o);\n\n    let objectStore = db.transaction(\"records\", \"readwrite\").objectStore(\"records\");\n    let request = objectStore.add({\n        \"method\": o.method,\n        \"url\": o.url,\n        \"response\": o.response\n    });\n    request.onsuccess = function () {\n\n    };\n    request.onerror = function () {\n        throw new Error(\"Mocker数据库添加失败\");\n    }\n\n}\n\nfunction deleteMockerRecord(o) {\n\n}\n\nfunction updateMockerRecord(o) {\n\n}\n\nfunction checkMockerRecord(o) {\n    // 检测输入参数\n    if (!(typeof o === 'object' &&\n        typeof o.method === 'string' &&\n        typeof o.url === 'string' &&\n        /^(get|post)$/i.test(o.method))\n    ) {\n        throw new Error('数据库mock参数非法')\n    }\n}\n\nexport {\n    createMockerDatabase,\n    getMockerRecord,\n    getAllMockerRecord,\n    addMockerRecord,\n    deleteMockerRecord,\n    updateMockerRecord\n}\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/Data/Database.js","/**\n * Created by mac on 17/1/20.\n */\n\nimport {createPrototypeChain, getVariableType} from '../util';\nimport {XHR_EVENTS, HTTP_STATUS_CODES} from '../constant';\nimport mockerConfig from '../config';\nimport {getMockerRecord} from '../Data';\n\n//保存原生XMLHttpRequest\nconst _XMLHttpRequest = window.XMLHttpRequest;\n//保存原生ActiveXObject\nconst _ActiveXObject = window.ActiveXObject;\n\n// 修改原生的XMLHttpRequest\nfunction replaceXMLHttpRequest() {\n    if (window.XMLHttpRequest) {\n        window.XMLHttpRequest = MockerHttpRequest;\n    }\n    if(window.mocker){\n        window.mocker.status = 1;\n    }\n}\n// 恢复原生的XMLHttpRequest\nfunction resetXMLHttpRequest() {\n    window.XMLHttpRequest = _XMLHttpRequest;\n    window.ActiveXObject = _ActiveXObject;\n    if(window.mocker){\n        window.mocker.status = 0;\n    }\n}\n\n\n//自定义XHR对象构造器\nfunction MockerHttpRequest() {\n\n    Object.defineProperties(this, {\n        _xmlHttpRequest: {\n            writable: false,\n            enumerable: false,\n            configurable: false\n        },\n        _listeners: {\n            value: {}\n        },\n        _requestHeader: {\n            value: {}\n\n        },\n        config: {\n            value: {\n                timeout: mockerConfig.timeout,\n                // 数据库mock记录（延迟对象）\n                record: null\n            }\n        },\n        onerror: {\n            value: null\n        },\n        onload: {\n            value: null\n        },\n        onloadend: {\n            value: null\n        },\n        onloadstart: {\n            value: null\n        },\n        onprogress: {\n            value: null\n\n        },\n        onreadystatechange: {\n            value: null\n        },\n        ontimeout: {\n            value: null\n        },\n        readyState: {\n            value: 0,\n            writable: true\n        },\n        response: {\n            value: '',\n            writable: true\n        },\n        responseText: {\n            value: '',\n            writable: true\n        },\n        responseType: {\n            value: ''\n        },\n        responseURL: {\n            value: ''\n        },\n        responseXML: {\n            value: null\n        },\n        status: {\n            value: 0,\n            writable: true\n        },\n        statusText: {\n            value: \"\",\n            writable: true\n\n        },\n        timeout: {\n            value: 0\n\n        }\n    });\n\n}\n\nlet MockerHttpRequestPrototype = {\n    constructor: {\n        value: MockerHttpRequest,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    DONE: {value: 4},\n    HEADERS_RECEIVED: {value: 2},\n    LOADING: {value: 3},\n    OPENED: {value: 1},\n    UNSENT: {value: 0},\n    abort: {\n        value: function () {\n            this.readyState = MockerHttpRequestPrototype.UNSENT.value;\n            this.dispatchEvent(new Event(XHR_EVENTS.ABORT));\n            this.dispatchEvent(new Event(XHR_EVENTS.ERROR));\n        }\n    },\n    getAllResponseHeaders: {\n        value: () => {\n        }\n    },\n    getResponseHeader: {\n        value: () => {\n        }\n    },\n    onabort: {},\n    onerror: {},\n    onload: {},\n    onloadend: {},\n    onloadstart: {},\n    onprogress: {},\n    onreadystatechange: {},\n    ontimeout: {},\n    open: {\n        //推荐不要用箭头函数,词法作用域错误\n        value: function (method, url, async, username, password) {\n\n\n            // 序列化请求\n            this.config.open = {\n                method: method,\n                url: url,\n                async: typeof async === 'boolean' ? async : true,\n                username: username,\n                password: password\n            };\n\n            let that = this;\n\n            //在Mock Indexdb记录中查询\n            this.config.record = find({method: method, url: url})\n                .then(function (item) {\n\n                    if (!item) {\n                        //在Mock记录中没有查询到\n\n\n                    } else {\n                        //在Mock记录中查询到\n\n                        that.readyState = MockerHttpRequestPrototype.OPENED.value;\n                        that.dispatchEvent(new Event(XHR_EVENTS.READYSTATECHANGE));\n                    }\n                    return item;\n                });\n\n\n        }\n    },\n    overrideMimeType: {\n        value: function () {\n        }\n    },\n    readyState: {},\n    response: {},\n    responseText: {},\n    responseType: {},\n    responseURL: {},\n    responseXML: {},\n    send: {\n        value: function (data) {\n\n\n            // 序列化请求\n\n            let that = this;\n\n            this.config.record.then(function (item) {\n                //已经在open 时使用Mock Indexdb记录中查询\n\n                if (!item) {\n                    //在Mock记录中没有查询到\n                } else {\n                    //在Mock记录中查询到\n                    that.response = that.responseText = item.response;\n\n                    that.setRequestHeader('X-Requested-With', 'MockXMLHttpRequest');\n                    that.dispatchEvent(new Event(XHR_EVENTS.LOADSTART));\n\n                    //使用settimeout模拟异步\n                    if (that.config.open.async === true) {\n                        window.setTimeout(done.bind(that), that.config.timeout);\n                    } else {\n                        done.call(that);\n                    }\n\n                }\n\n            });\n\n\n            function done() {\n                this.readyState = MockerHttpRequestPrototype.HEADERS_RECEIVED.value;\n                this.dispatchEvent(new Event(XHR_EVENTS.READYSTATECHANGE));\n\n                this.readyState = MockerHttpRequestPrototype.LOADING.value;\n                this.dispatchEvent(new Event(XHR_EVENTS.READYSTATECHANGE));\n\n                this.status = 200;\n\n                this.statusText = HTTP_STATUS_CODES[200];\n\n                this.readyState = MockerHttpRequestPrototype.DONE.value;\n\n                this.dispatchEvent(new Event(XHR_EVENTS.READYSTATECHANGE));\n                this.dispatchEvent(new Event(XHR_EVENTS.LOAD));\n                this.dispatchEvent(new Event(XHR_EVENTS.LOADEND));\n\n            }\n\n\n        }\n    },\n    setRequestHeader: {\n        value: function (key, value) {\n            if (key in this._requestHeader) {\n                this._requestHeader[key] = ',' + value;\n            } else {\n                this._requestHeader[key] = value;\n            }\n        }\n    },\n    status: {},\n    statusText: {},\n    timeout: {},\n    upload: {}\n};\n\nfunction MockXMLHttpRequestEventTarget() {\n}\n\nlet MockXMLHttpRequestEventTargetPrototype = {\n    constructor: {\n        value: MockXMLHttpRequestEventTarget,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    onabort: {},\n    onerror: {},\n    onload: {},\n    onloadend: {},\n    onloadstart: {},\n    onprogress: {},\n    ontimeout: {},\n};\nfunction MockEventTarget() {\n\n}\nlet MockEventTargetPrototype = {\n    constructor: {\n        value: MockEventTarget,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    },\n    addEventListener: {\n        value: function (type, callback) {\n            // type = 'on' + type;\n\n            if (!(type in this._listeners)) {\n                this._listeners[type] = []\n            }\n\n            this._listeners[type].push(callback);\n\n            // 把回调函数返回，方便移除\n            return callback;\n        }\n    },\n    dispatchEvent: {\n        value: function (event) {\n            if (!(event.type in this._listeners)) {\n                return;\n            }\n\n            let stack = this._listeners[event.type];\n\n            if (getVariableType(stack) !== 'Array') {\n                return;\n            }\n            // 事件目标改写\n            // event.target = this;\n\n            for (let i = 0; i < stack.length; i++) {\n                stack[i].call(this, event);\n            }\n        }\n    },\n    removeEventListener: {\n        value: function (type, callback) {\n            if (!(type in this._listeners)) {\n                return;\n            }\n\n            let stack = this._listeners[type];\n\n            if (getVariableType(stack) !== 'Array') {\n                return;\n            }\n\n            for (let i = 0; i < stack.length; i++) {\n                if (stack[i] === callback\n                ) {\n                    stack[i].splice(i, 1);\n                    i--;\n                }\n            }\n        }\n    }\n};\nfunction find(o) {\n    return getMockerRecord(o);\n}\n\n//MockerHttpRequest原型链模拟\nMockerHttpRequest.prototype = createPrototypeChain(\n    MockerHttpRequestPrototype,\n    MockXMLHttpRequestEventTargetPrototype,\n    MockEventTargetPrototype\n);\n\n\nexport {MockerHttpRequest, replaceXMLHttpRequest, resetXMLHttpRequest};\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/MockerHttpRequest/MockerHttpRequest.js","/**\n * Created by mac on 17/1/20.\n */\n\n//使用Object.create建立原型链继承关系\nfunction createPrototypeChain() {\n    // console.log(arguments);\n    if (typeof arguments[0] !== 'object') {\n        console.error('原型链属性为对象类型');\n        return;\n    }\n\n    if (arguments.length === 1) {\n        return Object.create(Object.prototype, arguments[0]);\n    } else {\n        return Object.create(\n            createPrototypeChain.apply(null, Array.prototype.slice.call(arguments, 1)),\n            arguments[0]\n        );\n    }\n}\n\n// 获取精确类型\nfunction getVariableType(o) {\n    return Object.prototype.toString.call(o).slice(8, -1);\n}\n\nexport {createPrototypeChain, getVariableType}\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/util/Util.js","/**\n * Created by mac on 17/1/20.\n */\nexport * from './Util'\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/util/index.js","/**\n * Created by mac on 17/2/4.\n */\n\nimport browserHtml from './Browser.html';\nimport {getAllMockerRecord} from '../Data';\n\n// 单例模式，因为视图仅出现一次\n\nlet MockerBrowser = {\n    init: function () {\n\n        let rootElement = document.createElement('div');\n        rootElement.className = 'mocker';\n        rootElement.innerHTML = browserHtml;\n\n        document.body.appendChild(rootElement);\n\n        // 初始化样式\n        this.setInitialStyle(rootElement);\n\n        // 激活工具面板\n        rootElement.querySelector('.mocker-switch-btn').onclick = this.switchStatus.bind(this, rootElement);\n\n        // 增加数据面板\n        rootElement.querySelector(\".mocker-table .add\").onclick = this.switchAdd.bind(this, rootElement);\n        // 查看数据列表\n        rootElement.querySelector(\".mocker-table .list\").onclick = this.switchList.bind(this, rootElement);\n        // 保存新的数据\n        rootElement.querySelector(\".mocker-table .save\").onclick = this.handleSave.bind(this, rootElement);\n    },\n    setInitialStyle: function (rootElement) {\n        if(window.mocker.status===0){\n            rootElement.querySelector('.mocker-icon').classList.remove('opened');\n\n        }else if(window.mocker.status ===1){\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n        }\n\n    },\n    switchStatus: function (rootElement, event) {\n\n        if(window.mocker.status===0){\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n            window.mocker && window.mocker.open();\n\n        }else if(window.mocker.status ===1){\n            rootElement.querySelector('.mocker-icon').classList.remove('opened');\n            window.mocker && window.mocker.close();\n        }\n\n    },\n    switchAdd: function (rootElement, event) {\n        if(rootElement.querySelector(\".form-add\").style.display === 'block'){\n            rootElement.querySelector(\".form-add\").style.display = 'none';\n        }else{\n            rootElement.querySelector(\".form-add\").style.display = 'block';\n            rootElement.querySelector(\".list-panel\").style.display = 'none';\n        }\n\n    },\n    switchList: function (rootElement) {\n        getAllMockerRecord().then(function (items) {\n            if(rootElement.querySelector(\".list-panel\").style.display === 'block'){\n                rootElement.querySelector(\".list-panel\").style.display = 'none';\n            }else{\n                rootElement.querySelector(\".form-add\").style.display = 'none';\n                rootElement.querySelector(\".list-panel\").style.display = 'block';\n\n                rootElement.querySelector('.mocker-list').innerHTML = items.map(function (ele, index, array) {\n                    return `<tr>\n                                <td>${ele.url}</td>\n                                <td>${ele.method}</td>\n                                <td>${ele.response}</td>\n                            </tr>`\n                });\n            }\n        });\n    },\n    handleSave: function (rootElement, event) {\n        event.preventDefault();\n\n        let formElement = rootElement.querySelector('.form-add');\n\n        mocker.mock({\n            url: formElement.querySelector(\"input[name=url]\").value,\n            method: formElement.querySelector(\"input[name=method]\").value,\n            response: formElement.querySelector(\"input[name=response]\").value\n        })\n\n        // 保存后开启mocker\n        if(window.mocker.status===0){\n            rootElement.querySelector('.mocker-icon').classList.add('opened');\n            window.mocker && window.mocker.open();\n        }\n    }\n\n};\nexport default MockerBrowser;\n\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/Gui/Browser.js","module.exports = \"<style>\\n    .mocker {\\n\\n    }\\n\\n    .mocker .mocker-container {\\n        border-radius: 10px;\\n        position: fixed;\\n        background: #F0F0F0;\\n        right: 10px;\\n        top: 10px;\\n        text-align: center;\\n        padding: 5px;\\n    }\\n\\n    .mocker .mocker-icon {\\n        fill: #334ff9;\\n    }\\n\\n    .mocker .mocker-icon.opened {\\n        fill: #fd0000;\\n    }\\n\\n    .mocker .mocker-switch-btn {\\n        border: none;\\n        background: transparent;\\n\\n        padding: 5px 10px;\\n        margin: 0;\\n        outline: none;\\n    }\\n\\n    .mocker .mocker-table {\\n\\n    }\\n\\n</style>\\n<script>\\n\\n</script>\\n<div class=\\\"mocker-container\\\">\\n    <button class=\\\"mocker-switch-btn\\\">\\n        <svg class=\\\"mocker-icon\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n             xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 32 32\\\">\\n            <path d=\\\"M22 2l-10 10h-6l-6 8c0 0 6.357-1.77 10.065-0.94l-10.065 12.94 13.184-10.255c1.839 4.208-1.184 10.255-1.184 10.255l8-6v-6l10-10 2-10-10 2z\\\"></path>\\n        </svg>\\n    </button>\\n    <div class=\\\"mocker-table\\\">\\n\\n        <button class=\\\"add\\\">增加</button>\\n        <button class=\\\"list\\\">数据</button>\\n\\n        <form style=\\\"display: none\\\" action=\\\"\\\" class=\\\"form-add\\\">\\n            <p>\\n                <label>\\n                    <input placeholder=\\\"请求路径\\\" type=\\\"text\\\" name=\\\"url\\\"/>\\n                </label>\\n            </p>\\n            <p>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"method\\\" value=\\\"get\\\">get\\n                </label>\\n                <label>\\n                    <input type=\\\"radio\\\" name=\\\"method\\\" value=\\\"post\\\">post\\n                </label>\\n            </p>\\n\\n            <p>\\n                <input placeholder=\\\"响应数据\\\" name=\\\"response\\\" type=\\\"text\\\">\\n            </p>\\n\\n            <button class=\\\"save\\\">保存</button>\\n        </form>\\n\\n        <table style=\\\"display: none\\\" class=\\\"list-panel\\\">\\n            <thead>\\n            <tr>\\n                <td>请求路径</td>\\n                <td>请求方式</td>\\n                <td>响应数据</td>\\n            </tr>\\n            </thead>\\n            <tbody class=\\\"mocker-list\\\">\\n\\n            </tbody>\\n        </table>\\n    </div>\\n</div>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/mocker/Gui/Browser.html\n// module id = 10\n// module chunks = 0 1","/**\n * Created by mac on 17/1/17.\n */\n\nimport * as npmPackage from '../../package.json';\nimport mockerConfig from './config';\n\nimport {createMockerDatabase, addMockerRecord} from './Data';\nimport {\n    MockerHttpRequest,\n    replaceXMLHttpRequest,\n    resetXMLHttpRequest,\n} from './MockerHttpRequest';\nimport  MockerBrowser from './Gui/Browser';\n\n// 初始化Mocker\nconst mocker = {\n    open:replaceXMLHttpRequest,\n    close: resetXMLHttpRequest,\n    status:0,\n    config: mockerConfig,\n    version: npmPackage.version,\n    mock: function () {\n        addMockerRecord.apply(this, arguments);\n    }\n};\n\n\n// 给window对象增加mocker接口\nif (!window.mocker || window.mocker.version !== mocker.version) {\n    window.mocker = mocker;\n}\n\n//初始化Mocker对应数据库\ntry {\n    createMockerDatabase();\n} catch (e) {\n    console.log('初始化Mocker数据库失败',e);\n}\n\n// 初始化MockerBrowser\ntry {\n    MockerBrowser.init();\n} catch (e) {\n    console.log('初始化MockerGui失败',e);\n}\n\n\n\nexport default mocker\n\n\n// WEBPACK FOOTER //\n// ./src/mocker/index.js"],"sourceRoot":""}